from flask_login import UserMixin
from conexion.conexion import get_connection

class Usuario(UserMixin):
    def __init__(self, id_usuario, nombre, email, password):
        self.id = id_usuario
        self.nombre = nombre
        self.email = email
        self.password = password

def get_user_by_email(email):
    conn = get_connection()
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM usuarios WHERE email = %s", (email,))
    row = cursor.fetchone()
    cursor.close()
    conn.close()
    if row:
        return Usuario(row["id_usuario"], row["nombre"], row["email"], row["password"])
    return None

def get_user_by_id(user_id):
    conn = get_connection()
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM usuarios WHERE id_usuario = %s", (user_id,))
    row = cursor.fetchone()
    cursor.close()
    conn.close()
    if row:
        return Usuario(row["id_usuario"], row["nombre"], row["email"], row["password"])
    return None
